========= Kode testing RELAY ==========

#include <Arduino.h>

/*
  ESP32 - Simple 8 Relay Auto Test
  Urutan pin: 18, 33, 32, 27, 26, 25, 2, 0
  Tiap relay ON 5 detik, lalu OFF dan lanjut ke relay berikutnya.
  Polarity default: ACTIVE-LOW (kebanyakan modul relay).
*/

static const bool RELAY_ACTIVE_LOW = true;        // ubah ke false jika modul relay aktif-HIGH
static const uint8_t RELAY_PINS[]   = {18, 33, 32, 27, 26, 25, 2, 0};
static const uint32_t ON_TIME_MS     = 5000;      // 5 detik ON
static const uint32_t GAP_MS         = 300;       // jeda singkat antar relay
static const size_t NUM_RELAYS       = sizeof(RELAY_PINS) / sizeof(RELAY_PINS[0]);

inline int ON_LEVEL()  { return RELAY_ACTIVE_LOW ? LOW  : HIGH; }
inline int OFF_LEVEL() { return RELAY_ACTIVE_LOW ? HIGH : LOW;  }

inline void relayOn(uint8_t pin)  { digitalWrite(pin, ON_LEVEL()); }
inline void relayOff(uint8_t pin) { digitalWrite(pin, OFF_LEVEL()); }

void setup() {
  Serial.begin(115200);
  delay(200);
  Serial.println("\nESP32 - Simple 8 Relay Auto Test");
  Serial.printf("Polarity: %s\n", RELAY_ACTIVE_LOW ? "ACTIVE-LOW" : "ACTIVE-HIGH");
  Serial.println("Sequence: 18, 33, 32, 27, 26, 25, 2, 0");

  // Set semua pin sebagai OUTPUT dan paksa OFF (failsafe)
  for (size_t i = 0; i < NUM_RELAYS; ++i) {
    pinMode(RELAY_PINS[i], OUTPUT);
    relayOff(RELAY_PINS[i]);
  }
  delay(500);
}

void loop() {
  for (size_t i = 0; i < NUM_RELAYS; ++i) {
    uint8_t pin = RELAY_PINS[i];

    Serial.printf("Relay %u (GPIO %u): ON\n", (unsigned)(i + 1), pin);
    relayOn(pin);
    delay(ON_TIME_MS);

    Serial.printf("Relay %u (GPIO %u): OFF\n", (unsigned)(i + 1), pin);
    relayOff(pin);
    delay(GAP_MS);
  }

  Serial.println("-- cycle complete --");
  delay(1000); // jeda sebelum mengulang siklus
}



========== Kode testing sensor ==========
